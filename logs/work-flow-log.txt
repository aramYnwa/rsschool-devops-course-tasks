2024-10-06T12:26:04.0533643Z Current runner version: '2.319.1'
2024-10-06T12:26:04.0558080Z ##[group]Operating System
2024-10-06T12:26:04.0558750Z Ubuntu
2024-10-06T12:26:04.0559185Z 22.04.5
2024-10-06T12:26:04.0559525Z LTS
2024-10-06T12:26:04.0559886Z ##[endgroup]
2024-10-06T12:26:04.0560352Z ##[group]Runner Image
2024-10-06T12:26:04.0560805Z Image: ubuntu-22.04
2024-10-06T12:26:04.0561277Z Version: 20240922.1.0
2024-10-06T12:26:04.0562425Z Included Software: https://github.com/actions/runner-images/blob/ubuntu22/20240922.1/images/ubuntu/Ubuntu2204-Readme.md
2024-10-06T12:26:04.0563894Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu22%2F20240922.1
2024-10-06T12:26:04.0564830Z ##[endgroup]
2024-10-06T12:26:04.0565266Z ##[group]Runner Image Provisioner
2024-10-06T12:26:04.0565770Z 2.0.384.1
2024-10-06T12:26:04.0566136Z ##[endgroup]
2024-10-06T12:26:04.0580933Z ##[group]GITHUB_TOKEN Permissions
2024-10-06T12:26:04.0582825Z Contents: read
2024-10-06T12:26:04.0583249Z Metadata: read
2024-10-06T12:26:04.0583941Z Packages: read
2024-10-06T12:26:04.0584398Z ##[endgroup]
2024-10-06T12:26:04.0587483Z Secret source: Actions
2024-10-06T12:26:04.0588032Z Prepare workflow directory
2024-10-06T12:26:04.1217391Z Prepare all required actions
2024-10-06T12:26:04.1381602Z Getting action download info
2024-10-06T12:26:04.2782558Z Download action repository 'actions/checkout@v2' (SHA:ee0669bd1cc54295c223e0bb666b733df41de1c5)
2024-10-06T12:26:04.4070896Z Download action repository 'hashicorp/setup-terraform@v2' (SHA:633666f66e0061ca3b725c73b2ec20cd13a8fdd1)
2024-10-06T12:26:04.6328225Z Download action repository 'aws-actions/configure-aws-credentials@v1' (SHA:67fbcbb121271f7775d2e7715933280b06314838)
2024-10-06T12:26:04.9659545Z Complete job name: terraform
2024-10-06T12:26:05.0585372Z ##[group]Run actions/checkout@v2
2024-10-06T12:26:05.0585924Z with:
2024-10-06T12:26:05.0586433Z   repository: aramYnwa/rsschool-devops-course-tasks
2024-10-06T12:26:05.0587195Z   token: ***
2024-10-06T12:26:05.0587576Z   ssh-strict: true
2024-10-06T12:26:05.0588056Z   persist-credentials: true
2024-10-06T12:26:05.0588486Z   clean: true
2024-10-06T12:26:05.0588786Z   fetch-depth: 1
2024-10-06T12:26:05.0589191Z   lfs: false
2024-10-06T12:26:05.0589528Z   submodules: false
2024-10-06T12:26:05.0589886Z   set-safe-directory: true
2024-10-06T12:26:05.0590358Z ##[endgroup]
2024-10-06T12:26:05.2870785Z Syncing repository: aramYnwa/rsschool-devops-course-tasks
2024-10-06T12:26:05.2874189Z ##[group]Getting Git version info
2024-10-06T12:26:05.2875892Z Working directory is '/home/runner/work/rsschool-devops-course-tasks/rsschool-devops-course-tasks'
2024-10-06T12:26:05.2877980Z [command]/usr/bin/git version
2024-10-06T12:26:05.2878971Z git version 2.46.1
2024-10-06T12:26:05.2901144Z ##[endgroup]
2024-10-06T12:26:05.2922347Z Temporarily overriding HOME='/home/runner/work/_temp/67cb5150-f249-4002-a682-984b3fd915e6' before making global git config changes
2024-10-06T12:26:05.2924626Z Adding repository directory to the temporary git global config as a safe directory
2024-10-06T12:26:05.2927082Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/rsschool-devops-course-tasks/rsschool-devops-course-tasks
2024-10-06T12:26:05.2970489Z Deleting the contents of '/home/runner/work/rsschool-devops-course-tasks/rsschool-devops-course-tasks'
2024-10-06T12:26:05.2974750Z ##[group]Initializing the repository
2024-10-06T12:26:05.2979196Z [command]/usr/bin/git init /home/runner/work/rsschool-devops-course-tasks/rsschool-devops-course-tasks
2024-10-06T12:26:05.3075431Z hint: Using 'master' as the name for the initial branch. This default branch name
2024-10-06T12:26:05.3076619Z hint: is subject to change. To configure the initial branch name to use in all
2024-10-06T12:26:05.3077621Z hint: of your new repositories, which will suppress this warning, call:
2024-10-06T12:26:05.3078273Z hint:
2024-10-06T12:26:05.3078805Z hint: 	git config --global init.defaultBranch <name>
2024-10-06T12:26:05.3079500Z hint:
2024-10-06T12:26:05.3080441Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2024-10-06T12:26:05.3082208Z hint: 'development'. The just-created branch can be renamed via this command:
2024-10-06T12:26:05.3083477Z hint:
2024-10-06T12:26:05.3084166Z hint: 	git branch -m <name>
2024-10-06T12:26:05.3085870Z Initialized empty Git repository in /home/runner/work/rsschool-devops-course-tasks/rsschool-devops-course-tasks/.git/
2024-10-06T12:26:05.3095146Z [command]/usr/bin/git remote add origin https://github.com/aramYnwa/rsschool-devops-course-tasks
2024-10-06T12:26:05.3129363Z ##[endgroup]
2024-10-06T12:26:05.3130701Z ##[group]Disabling automatic garbage collection
2024-10-06T12:26:05.3134072Z [command]/usr/bin/git config --local gc.auto 0
2024-10-06T12:26:05.3161557Z ##[endgroup]
2024-10-06T12:26:05.3163102Z ##[group]Setting up auth
2024-10-06T12:26:05.3168869Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2024-10-06T12:26:05.3196981Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2024-10-06T12:26:05.3547709Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2024-10-06T12:26:05.3575821Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2024-10-06T12:26:05.3800702Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2024-10-06T12:26:05.3835137Z ##[endgroup]
2024-10-06T12:26:05.3835848Z ##[group]Fetching the repository
2024-10-06T12:26:05.3843331Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --progress --no-recurse-submodules --depth=1 origin +c9cd0118b74d93bb618c7b2a2791797c5c9c84c8:refs/remotes/pull/1/merge
2024-10-06T12:26:05.5528853Z remote: Enumerating objects: 12, done.        
2024-10-06T12:26:05.5530273Z remote: Counting objects:   8% (1/12)        
2024-10-06T12:26:05.5530959Z remote: Counting objects:  16% (2/12)        
2024-10-06T12:26:05.5531605Z remote: Counting objects:  25% (3/12)        
2024-10-06T12:26:05.5532971Z remote: Counting objects:  33% (4/12)        
2024-10-06T12:26:05.5533692Z remote: Counting objects:  41% (5/12)        
2024-10-06T12:26:05.5534339Z remote: Counting objects:  50% (6/12)        
2024-10-06T12:26:05.5535109Z remote: Counting objects:  58% (7/12)        
2024-10-06T12:26:05.5535695Z remote: Counting objects:  66% (8/12)        
2024-10-06T12:26:05.5536474Z remote: Counting objects:  75% (9/12)        
2024-10-06T12:26:05.5537381Z remote: Counting objects:  83% (10/12)        
2024-10-06T12:26:05.5538066Z remote: Counting objects:  91% (11/12)        
2024-10-06T12:26:05.5538830Z remote: Counting objects: 100% (12/12)        
2024-10-06T12:26:05.5539340Z remote: Counting objects: 100% (12/12), done.        
2024-10-06T12:26:05.5539895Z remote: Compressing objects:   9% (1/11)        
2024-10-06T12:26:05.5540550Z remote: Compressing objects:  18% (2/11)        
2024-10-06T12:26:05.5541077Z remote: Compressing objects:  27% (3/11)        
2024-10-06T12:26:05.5541596Z remote: Compressing objects:  36% (4/11)        
2024-10-06T12:26:05.5542348Z remote: Compressing objects:  45% (5/11)        
2024-10-06T12:26:05.5542843Z remote: Compressing objects:  54% (6/11)        
2024-10-06T12:26:05.5543360Z remote: Compressing objects:  63% (7/11)        
2024-10-06T12:26:05.5543974Z remote: Compressing objects:  72% (8/11)        
2024-10-06T12:26:05.5544480Z remote: Compressing objects:  81% (9/11)        
2024-10-06T12:26:05.5545017Z remote: Compressing objects:  90% (10/11)        
2024-10-06T12:26:05.5545611Z remote: Compressing objects: 100% (11/11)        
2024-10-06T12:26:05.5546168Z remote: Compressing objects: 100% (11/11), done.        
2024-10-06T12:26:05.5868238Z remote: Total 12 (delta 0), reused 9 (delta 0), pack-reused 0 (from 0)        
2024-10-06T12:26:05.5978509Z From https://github.com/aramYnwa/rsschool-devops-course-tasks
2024-10-06T12:26:05.5979925Z  * [new ref]         c9cd0118b74d93bb618c7b2a2791797c5c9c84c8 -> pull/1/merge
2024-10-06T12:26:05.6005056Z ##[endgroup]
2024-10-06T12:26:05.6005735Z ##[group]Determining the checkout info
2024-10-06T12:26:05.6007014Z ##[endgroup]
2024-10-06T12:26:05.6007774Z ##[group]Checking out the ref
2024-10-06T12:26:05.6011536Z [command]/usr/bin/git checkout --progress --force refs/remotes/pull/1/merge
2024-10-06T12:26:05.6073908Z Note: switching to 'refs/remotes/pull/1/merge'.
2024-10-06T12:26:05.6074804Z 
2024-10-06T12:26:05.6075566Z You are in 'detached HEAD' state. You can look around, make experimental
2024-10-06T12:26:05.6076579Z changes and commit them, and you can discard any commits you make in this
2024-10-06T12:26:05.6077347Z state without impacting any branches by switching back to a branch.
2024-10-06T12:26:05.6077769Z 
2024-10-06T12:26:05.6078406Z If you want to create a new branch to retain commits you create, you may
2024-10-06T12:26:05.6079975Z do so (now or later) by using -c with the switch command. Example:
2024-10-06T12:26:05.6080822Z 
2024-10-06T12:26:05.6081211Z   git switch -c <new-branch-name>
2024-10-06T12:26:05.6081787Z 
2024-10-06T12:26:05.6082453Z Or undo this operation with:
2024-10-06T12:26:05.6083127Z 
2024-10-06T12:26:05.6083371Z   git switch -
2024-10-06T12:26:05.6083730Z 
2024-10-06T12:26:05.6084338Z Turn off this advice by setting config variable advice.detachedHead to false
2024-10-06T12:26:05.6085161Z 
2024-10-06T12:26:05.6086239Z HEAD is now at c9cd011 Merge 55e865e1ff53548be080e4a5551f96fa938a1d73 into cd13be084700aa8e97fb39cad01800a3fe1e82e3
2024-10-06T12:26:05.6088077Z ##[endgroup]
2024-10-06T12:26:05.6118167Z [command]/usr/bin/git log -1 --format='%H'
2024-10-06T12:26:05.6140508Z 'c9cd0118b74d93bb618c7b2a2791797c5c9c84c8'
2024-10-06T12:26:05.6454304Z ##[group]Run hashicorp/setup-terraform@v2
2024-10-06T12:26:05.6454843Z with:
2024-10-06T12:26:05.6455293Z   terraform_version: 1.9.7
2024-10-06T12:26:05.6455803Z   cli_config_credentials_hostname: app.terraform.io
2024-10-06T12:26:05.6456282Z   terraform_wrapper: true
2024-10-06T12:26:05.6456738Z ##[endgroup]
2024-10-06T12:26:06.0840503Z [command]/usr/bin/unzip -o -q /home/runner/work/_temp/a38c54f2-ed4c-4921-b616-a03637cf6072
2024-10-06T12:26:06.7086413Z ##[group]Run aws-actions/configure-aws-credentials@v1
2024-10-06T12:26:06.7087078Z with:
2024-10-06T12:26:06.7087585Z   aws-access-key-id: ***
2024-10-06T12:26:06.7088164Z   aws-secret-access-key: ***
2024-10-06T12:26:06.7088641Z   aws-region: eu-central-1
2024-10-06T12:26:06.7089048Z   audience: sts.amazonaws.com
2024-10-06T12:26:06.7089403Z env:
2024-10-06T12:26:06.7089975Z   TERRAFORM_CLI_PATH: /home/runner/work/_temp/bd569276-bc3e-4e0c-9c20-259349776706
2024-10-06T12:26:06.7090594Z ##[endgroup]
2024-10-06T12:26:07.4752820Z 
2024-10-06T12:26:07.4766433Z ##[warning]The `set-output` command is deprecated and will be disabled soon. Please upgrade to using Environment Files. For more information see: https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/
2024-10-06T12:26:07.4973290Z ##[group]Run terraform init
2024-10-06T12:26:07.4973679Z [36;1mterraform init[0m
2024-10-06T12:26:07.4999562Z shell: /usr/bin/bash -e {0}
2024-10-06T12:26:07.4999875Z env:
2024-10-06T12:26:07.5000296Z   TERRAFORM_CLI_PATH: /home/runner/work/_temp/bd569276-bc3e-4e0c-9c20-259349776706
2024-10-06T12:26:07.5000862Z   AWS_DEFAULT_REGION: eu-central-1
2024-10-06T12:26:07.5001199Z   AWS_REGION: eu-central-1
2024-10-06T12:26:07.5001631Z   AWS_ACCESS_KEY_ID: ***
2024-10-06T12:26:07.5002253Z   AWS_SECRET_ACCESS_KEY: ***
2024-10-06T12:26:07.5002559Z ##[endgroup]
2024-10-06T12:26:07.7103412Z [command]/home/runner/work/_temp/bd569276-bc3e-4e0c-9c20-259349776706/terraform-bin init
2024-10-06T12:26:07.7392183Z [0m[1mInitializing the backend...[0m
2024-10-06T12:26:08.5951598Z [0m[32m
2024-10-06T12:26:08.5952507Z Successfully configured the backend "s3"! Terraform will automatically
2024-10-06T12:26:08.5953773Z use this backend unless the backend configuration changes.[0m
2024-10-06T12:26:08.9128850Z [0m[1mInitializing provider plugins...[0m
2024-10-06T12:26:08.9130400Z - Finding latest version of hashicorp/aws...
2024-10-06T12:26:09.1139714Z - Installing hashicorp/aws v5.70.0...
2024-10-06T12:26:12.6868868Z - Installed hashicorp/aws v5.70.0 (signed by HashiCorp)
2024-10-06T12:26:12.6870402Z Terraform has created a lock file [1m.terraform.lock.hcl[0m to record the provider
2024-10-06T12:26:12.6872147Z selections it made above. Include this file in your version control repository
2024-10-06T12:26:12.6873315Z so that Terraform can guarantee to make the same selections by default when
2024-10-06T12:26:12.6874350Z you run "terraform init" in the future.[0m
2024-10-06T12:26:12.6874852Z 
2024-10-06T12:26:12.6875432Z [0m[1m[32mTerraform has been successfully initialized![0m[32m[0m
2024-10-06T12:26:12.6876370Z [0m[32m
2024-10-06T12:26:12.6877093Z You may now begin working with Terraform. Try running "terraform plan" to see
2024-10-06T12:26:12.6878425Z any changes that are required for your infrastructure. All Terraform commands
2024-10-06T12:26:12.6879343Z should now work.
2024-10-06T12:26:12.6879622Z 
2024-10-06T12:26:12.6880124Z If you ever set or change modules or backend configuration for Terraform,
2024-10-06T12:26:12.6881437Z rerun this command to reinitialize your working directory. If you forget, other
2024-10-06T12:26:12.6883118Z commands will detect it and remind you to do so if necessary.[0m
2024-10-06T12:26:12.7040319Z ##[group]Run terraform plan
2024-10-06T12:26:12.7040659Z [36;1mterraform plan[0m
2024-10-06T12:26:12.7064828Z shell: /usr/bin/bash -e {0}
2024-10-06T12:26:12.7065143Z env:
2024-10-06T12:26:12.7065569Z   TERRAFORM_CLI_PATH: /home/runner/work/_temp/bd569276-bc3e-4e0c-9c20-259349776706
2024-10-06T12:26:12.7066121Z   AWS_DEFAULT_REGION: eu-central-1
2024-10-06T12:26:12.7066463Z   AWS_REGION: eu-central-1
2024-10-06T12:26:12.7066907Z   AWS_ACCESS_KEY_ID: ***
2024-10-06T12:26:12.7067356Z   AWS_SECRET_ACCESS_KEY: ***
2024-10-06T12:26:12.7067639Z ##[endgroup]
2024-10-06T12:26:12.7587660Z [command]/home/runner/work/_temp/bd569276-bc3e-4e0c-9c20-259349776706/terraform-bin plan
2024-10-06T12:26:16.3595690Z 
2024-10-06T12:26:16.3596851Z Terraform used the selected providers to generate the following execution
2024-10-06T12:26:16.3597972Z plan. Resource actions are indicated with the following symbols:
2024-10-06T12:26:16.3598975Z   [32m+[0m create[0m
2024-10-06T12:26:16.3599256Z 
2024-10-06T12:26:16.3599575Z Terraform will perform the following actions:
2024-10-06T12:26:16.3600036Z 
2024-10-06T12:26:16.3602982Z [1m  # aws_iam_openid_connect_provider.github[0m will be created
2024-10-06T12:26:16.3604571Z [0m  [32m+[0m[0m resource "aws_iam_openid_connect_provider" "github" {
2024-10-06T12:26:16.3605551Z       [32m+[0m[0m arn             = (known after apply)
2024-10-06T12:26:16.3606350Z       [32m+[0m[0m client_id_list  = [
2024-10-06T12:26:16.3607043Z           [32m+[0m[0m "sts.amazonaws.com",
2024-10-06T12:26:16.3607636Z         ]
2024-10-06T12:26:16.3608187Z       [32m+[0m[0m id              = (known after apply)
2024-10-06T12:26:16.3608996Z       [32m+[0m[0m tags_all        = (known after apply)
2024-10-06T12:26:16.3609740Z       [32m+[0m[0m thumbprint_list = [
2024-10-06T12:26:16.3610569Z           [32m+[0m[0m "6938fd4d98e9a3b8a5b1baba04a40f10a11123d6",
2024-10-06T12:26:16.3611284Z         ]
2024-10-06T12:26:16.3612226Z       [32m+[0m[0m url             = "https://token.actions.githubusercontent.com"
2024-10-06T12:26:16.3613051Z     }
2024-10-06T12:26:16.3613258Z 
2024-10-06T12:26:16.3613676Z [1m  # aws_iam_role.github_actions_role[0m will be created
2024-10-06T12:26:16.3614652Z [0m  [32m+[0m[0m resource "aws_iam_role" "github_actions_role" {
2024-10-06T12:26:16.3615601Z       [32m+[0m[0m arn                   = (known after apply)
2024-10-06T12:26:16.3616489Z       [32m+[0m[0m assume_role_policy    = (known after apply)
2024-10-06T12:26:16.3617794Z       [32m+[0m[0m create_date           = (known after apply)
2024-10-06T12:26:16.3618593Z       [32m+[0m[0m force_detach_policies = false
2024-10-06T12:26:16.3619424Z       [32m+[0m[0m id                    = (known after apply)
2024-10-06T12:26:16.3620294Z       [32m+[0m[0m managed_policy_arns   = (known after apply)
2024-10-06T12:26:16.3621091Z       [32m+[0m[0m max_session_duration  = 3600
2024-10-06T12:26:16.3622268Z       [32m+[0m[0m name                  = "GithubActionsRole"
2024-10-06T12:26:16.3623153Z       [32m+[0m[0m name_prefix           = (known after apply)
2024-10-06T12:26:16.3623918Z       [32m+[0m[0m path                  = "/"
2024-10-06T12:26:16.3624692Z       [32m+[0m[0m tags_all              = (known after apply)
2024-10-06T12:26:16.3625552Z       [32m+[0m[0m unique_id             = (known after apply)
2024-10-06T12:26:16.3626064Z 
2024-10-06T12:26:16.3626382Z       [32m+[0m[0m inline_policy (known after apply)
2024-10-06T12:26:16.3626990Z     }
2024-10-06T12:26:16.3627191Z 
2024-10-06T12:26:16.3627666Z [1m  # aws_iam_role_policy_attachment.attach_ec2[0m will be created
2024-10-06T12:26:16.3628778Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_ec2" {
2024-10-06T12:26:16.3629737Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:16.3643575Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonEC2FullAccess"
2024-10-06T12:26:16.3644585Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:16.3645527Z     }
2024-10-06T12:26:16.3645739Z 
2024-10-06T12:26:16.3646283Z [1m  # aws_iam_role_policy_attachment.attach_eventbridge[0m will be created
2024-10-06T12:26:16.3647501Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_eventbridge" {
2024-10-06T12:26:16.3648489Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:16.3649585Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonEventBridgeFullAccess"
2024-10-06T12:26:16.3650609Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:16.3651197Z     }
2024-10-06T12:26:16.3651393Z 
2024-10-06T12:26:16.3652081Z [1m  # aws_iam_role_policy_attachment.attach_iam[0m will be created
2024-10-06T12:26:16.3653196Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_iam" {
2024-10-06T12:26:16.3654145Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:16.3655109Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/IAMFullAccess"
2024-10-06T12:26:16.3656024Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:16.3656614Z     }
2024-10-06T12:26:16.3656820Z 
2024-10-06T12:26:16.3657308Z [1m  # aws_iam_role_policy_attachment.attach_route53[0m will be created
2024-10-06T12:26:16.3658451Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_route53" {
2024-10-06T12:26:16.3659412Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:16.3660408Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonRoute53FullAccess"
2024-10-06T12:26:16.3661355Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:16.3661723Z     }
2024-10-06T12:26:16.3662005Z 
2024-10-06T12:26:16.3662326Z [1m  # aws_iam_role_policy_attachment.attach_s3[0m will be created
2024-10-06T12:26:16.3662979Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_s3" {
2024-10-06T12:26:16.3663544Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:16.3664205Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonS3FullAccess"
2024-10-06T12:26:16.3664789Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:16.3665146Z     }
2024-10-06T12:26:16.3665271Z 
2024-10-06T12:26:16.3665544Z [1m  # aws_iam_role_policy_attachment.attach_sqs[0m will be created
2024-10-06T12:26:16.3666188Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_sqs" {
2024-10-06T12:26:16.3666813Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:16.3667614Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonSQSFullAccess"
2024-10-06T12:26:16.3668176Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:16.3668533Z     }
2024-10-06T12:26:16.3668648Z 
2024-10-06T12:26:16.3668922Z [1m  # aws_iam_role_policy_attachment.attach_vpc[0m will be created
2024-10-06T12:26:16.3669562Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_vpc" {
2024-10-06T12:26:16.3670114Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:16.3670697Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonVPCFullAccess"
2024-10-06T12:26:16.3671251Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:16.3671599Z     }
2024-10-06T12:26:16.3671722Z 
2024-10-06T12:26:16.3672115Z [1mPlan:[0m 9 to add, 0 to change, 0 to destroy.
2024-10-06T12:26:16.3672587Z [0m[90m
2024-10-06T12:26:16.3673296Z ─────────────────────────────────────────────────────────────────────────────[0m
2024-10-06T12:26:16.3673673Z 
2024-10-06T12:26:16.3674012Z Note: You didn't use the -out option to save this plan, so Terraform can't
2024-10-06T12:26:16.3674681Z guarantee to take exactly these actions if you run "terraform apply" now.
2024-10-06T12:26:16.3768448Z ##[group]Run terraform apply -auto-approve
2024-10-06T12:26:16.3768877Z [36;1mterraform apply -auto-approve[0m
2024-10-06T12:26:16.3793577Z shell: /usr/bin/bash -e {0}
2024-10-06T12:26:16.3793883Z env:
2024-10-06T12:26:16.3794296Z   TERRAFORM_CLI_PATH: /home/runner/work/_temp/bd569276-bc3e-4e0c-9c20-259349776706
2024-10-06T12:26:16.3794854Z   AWS_DEFAULT_REGION: eu-central-1
2024-10-06T12:26:16.3795184Z   AWS_REGION: eu-central-1
2024-10-06T12:26:16.3795764Z   AWS_ACCESS_KEY_ID: ***
2024-10-06T12:26:16.3796212Z   AWS_SECRET_ACCESS_KEY: ***
2024-10-06T12:26:16.3796509Z ##[endgroup]
2024-10-06T12:26:16.4308931Z [command]/home/runner/work/_temp/bd569276-bc3e-4e0c-9c20-259349776706/terraform-bin apply -auto-approve
2024-10-06T12:26:20.0916032Z 
2024-10-06T12:26:20.0917058Z Terraform used the selected providers to generate the following execution
2024-10-06T12:26:20.0918330Z plan. Resource actions are indicated with the following symbols:
2024-10-06T12:26:20.0919383Z   [32m+[0m create[0m
2024-10-06T12:26:20.0919807Z 
2024-10-06T12:26:20.0920172Z Terraform will perform the following actions:
2024-10-06T12:26:20.0920803Z 
2024-10-06T12:26:20.0921378Z [1m  # aws_iam_openid_connect_provider.github[0m will be created
2024-10-06T12:26:20.0922371Z [0m  [32m+[0m[0m resource "aws_iam_openid_connect_provider" "github" {
2024-10-06T12:26:20.0923017Z       [32m+[0m[0m arn             = (known after apply)
2024-10-06T12:26:20.0923496Z       [32m+[0m[0m client_id_list  = [
2024-10-06T12:26:20.0923944Z           [32m+[0m[0m "sts.amazonaws.com",
2024-10-06T12:26:20.0924318Z         ]
2024-10-06T12:26:20.0924668Z       [32m+[0m[0m id              = (known after apply)
2024-10-06T12:26:20.0925193Z       [32m+[0m[0m tags_all        = (known after apply)
2024-10-06T12:26:20.0925685Z       [32m+[0m[0m thumbprint_list = [
2024-10-06T12:26:20.0926228Z           [32m+[0m[0m "6938fd4d98e9a3b8a5b1baba04a40f10a11123d6",
2024-10-06T12:26:20.0926676Z         ]
2024-10-06T12:26:20.0927209Z       [32m+[0m[0m url             = "https://token.actions.githubusercontent.com"
2024-10-06T12:26:20.0927745Z     }
2024-10-06T12:26:20.0927887Z 
2024-10-06T12:26:20.0928144Z [1m  # aws_iam_role.github_actions_role[0m will be created
2024-10-06T12:26:20.0928775Z [0m  [32m+[0m[0m resource "aws_iam_role" "github_actions_role" {
2024-10-06T12:26:20.0929379Z       [32m+[0m[0m arn                   = (known after apply)
2024-10-06T12:26:20.0929952Z       [32m+[0m[0m assume_role_policy    = (known after apply)
2024-10-06T12:26:20.0930527Z       [32m+[0m[0m create_date           = (known after apply)
2024-10-06T12:26:20.0931060Z       [32m+[0m[0m force_detach_policies = false
2024-10-06T12:26:20.0931594Z       [32m+[0m[0m id                    = (known after apply)
2024-10-06T12:26:20.0932794Z       [32m+[0m[0m managed_policy_arns   = (known after apply)
2024-10-06T12:26:20.0933280Z       [32m+[0m[0m max_session_duration  = 3600
2024-10-06T12:26:20.0933769Z       [32m+[0m[0m name                  = "GithubActionsRole"
2024-10-06T12:26:20.0934314Z       [32m+[0m[0m name_prefix           = (known after apply)
2024-10-06T12:26:20.0934800Z       [32m+[0m[0m path                  = "/"
2024-10-06T12:26:20.0935276Z       [32m+[0m[0m tags_all              = (known after apply)
2024-10-06T12:26:20.0935778Z       [32m+[0m[0m unique_id             = (known after apply)
2024-10-06T12:26:20.0936073Z 
2024-10-06T12:26:20.0936273Z       [32m+[0m[0m inline_policy (known after apply)
2024-10-06T12:26:20.0936632Z     }
2024-10-06T12:26:20.0936749Z 
2024-10-06T12:26:20.0937028Z [1m  # aws_iam_role_policy_attachment.attach_ec2[0m will be created
2024-10-06T12:26:20.0937668Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_ec2" {
2024-10-06T12:26:20.0938233Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:20.0938938Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonEC2FullAccess"
2024-10-06T12:26:20.0939737Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:20.0940103Z     }
2024-10-06T12:26:20.0940277Z 
2024-10-06T12:26:20.0940590Z [1m  # aws_iam_role_policy_attachment.attach_eventbridge[0m will be created
2024-10-06T12:26:20.0941302Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_eventbridge" {
2024-10-06T12:26:20.0942007Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:20.0942653Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonEventBridgeFullAccess"
2024-10-06T12:26:20.0943238Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:20.0943578Z     }
2024-10-06T12:26:20.0943699Z 
2024-10-06T12:26:20.0943968Z [1m  # aws_iam_role_policy_attachment.attach_iam[0m will be created
2024-10-06T12:26:20.0944600Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_iam" {
2024-10-06T12:26:20.0945143Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:20.0945869Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/IAMFullAccess"
2024-10-06T12:26:20.0946881Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:20.0947256Z     }
2024-10-06T12:26:20.0947374Z 
2024-10-06T12:26:20.0947673Z [1m  # aws_iam_role_policy_attachment.attach_route53[0m will be created
2024-10-06T12:26:20.0948347Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_route53" {
2024-10-06T12:26:20.0948910Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:20.0949535Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonRoute53FullAccess"
2024-10-06T12:26:20.0950112Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:20.0950466Z     }
2024-10-06T12:26:20.0950589Z 
2024-10-06T12:26:20.0950864Z [1m  # aws_iam_role_policy_attachment.attach_s3[0m will be created
2024-10-06T12:26:20.0951502Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_s3" {
2024-10-06T12:26:20.0952309Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:20.0952921Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonS3FullAccess"
2024-10-06T12:26:20.0953473Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:20.0953824Z     }
2024-10-06T12:26:20.0953938Z 
2024-10-06T12:26:20.0954214Z [1m  # aws_iam_role_policy_attachment.attach_sqs[0m will be created
2024-10-06T12:26:20.0954844Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_sqs" {
2024-10-06T12:26:20.0955392Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:20.0955975Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonSQSFullAccess"
2024-10-06T12:26:20.0956525Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:20.0957040Z     }
2024-10-06T12:26:20.0957157Z 
2024-10-06T12:26:20.0957431Z [1m  # aws_iam_role_policy_attachment.attach_vpc[0m will be created
2024-10-06T12:26:20.0958058Z [0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "attach_vpc" {
2024-10-06T12:26:20.0958601Z       [32m+[0m[0m id         = (known after apply)
2024-10-06T12:26:20.0959193Z       [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonVPCFullAccess"
2024-10-06T12:26:20.0959742Z       [32m+[0m[0m role       = "GithubActionsRole"
2024-10-06T12:26:20.0960089Z     }
2024-10-06T12:26:20.0960212Z 
2024-10-06T12:26:20.0960407Z [1mPlan:[0m 9 to add, 0 to change, 0 to destroy.
2024-10-06T12:26:20.7559225Z [0m[0m[1maws_iam_openid_connect_provider.github: Creating...[0m[0m
2024-10-06T12:26:20.8779026Z [0m[1maws_iam_openid_connect_provider.github: Creation complete after 0s [id=arn:aws:iam::***:oidc-provider/token.actions.githubusercontent.com][0m
2024-10-06T12:26:20.8808999Z [0m[1maws_iam_role.github_actions_role: Creating...[0m[0m
2024-10-06T12:26:21.0431700Z [0m[1maws_iam_role.github_actions_role: Creation complete after 0s [id=GithubActionsRole][0m
2024-10-06T12:26:21.0457751Z [0m[1maws_iam_role_policy_attachment.attach_eventbridge: Creating...[0m[0m
2024-10-06T12:26:21.0470757Z [0m[1maws_iam_role_policy_attachment.attach_route53: Creating...[0m[0m
2024-10-06T12:26:21.0488166Z [0m[1maws_iam_role_policy_attachment.attach_iam: Creating...[0m[0m
2024-10-06T12:26:21.0489825Z [0m[1maws_iam_role_policy_attachment.attach_s3: Creating...[0m[0m
2024-10-06T12:26:21.0492101Z [0m[1maws_iam_role_policy_attachment.attach_vpc: Creating...[0m[0m
2024-10-06T12:26:21.0493939Z [0m[1maws_iam_role_policy_attachment.attach_ec2: Creating...[0m[0m
2024-10-06T12:26:21.0501823Z [0m[1maws_iam_role_policy_attachment.attach_sqs: Creating...[0m[0m
2024-10-06T12:26:21.1521000Z [0m[1maws_iam_role_policy_attachment.attach_route53: Creation complete after 0s [id=GithubActionsRole-20241006122621114500000001][0m
2024-10-06T12:26:21.1592057Z [0m[1maws_iam_role_policy_attachment.attach_vpc: Creation complete after 0s [id=GithubActionsRole-20241006122621124500000002][0m
2024-10-06T12:26:21.1696276Z [0m[1maws_iam_role_policy_attachment.attach_s3: Creation complete after 0s [id=GithubActionsRole-20241006122621129400000003][0m
2024-10-06T12:26:21.1819772Z [0m[1maws_iam_role_policy_attachment.attach_sqs: Creation complete after 0s [id=GithubActionsRole-20241006122621139300000004][0m
2024-10-06T12:26:21.2169954Z [0m[1maws_iam_role_policy_attachment.attach_iam: Creation complete after 0s [id=GithubActionsRole-20241006122621180900000007][0m
2024-10-06T12:26:21.2199883Z [0m[1maws_iam_role_policy_attachment.attach_eventbridge: Creation complete after 0s [id=GithubActionsRole-20241006122621172100000005][0m
2024-10-06T12:26:21.2334419Z [0m[1maws_iam_role_policy_attachment.attach_ec2: Creation complete after 0s [id=GithubActionsRole-20241006122621179800000006][0m
2024-10-06T12:26:21.3708961Z [0m[1m[32m
2024-10-06T12:26:21.3709888Z Apply complete! Resources: 9 added, 0 changed, 0 destroyed.
2024-10-06T12:26:21.3804290Z [0m::debug::Terraform exited with code 0.
2024-10-06T12:26:21.3951187Z Post job cleanup.
2024-10-06T12:26:21.4330611Z Post job cleanup.
2024-10-06T12:26:21.5241022Z [command]/usr/bin/git version
2024-10-06T12:26:21.5284948Z git version 2.46.1
2024-10-06T12:26:21.5335978Z Temporarily overriding HOME='/home/runner/work/_temp/386c77bc-7b3e-42ca-8446-fe5e5acb6387' before making global git config changes
2024-10-06T12:26:21.5337501Z Adding repository directory to the temporary git global config as a safe directory
2024-10-06T12:26:21.5340615Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/rsschool-devops-course-tasks/rsschool-devops-course-tasks
2024-10-06T12:26:21.5373595Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2024-10-06T12:26:21.5404917Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2024-10-06T12:26:21.5655087Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2024-10-06T12:26:21.5676466Z http.https://github.com/.extraheader
2024-10-06T12:26:21.5689285Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2024-10-06T12:26:21.5720970Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2024-10-06T12:26:21.6218073Z Cleaning up orphan processes
